{
  "Install": {
    "Actions": [
      {
        "displayname": "Deploying database scripts",
        "name": "Microsoft-DeploySQLScripts",
        "SqlScriptsFolder": "Service/Database",
        "SqlServerIndex": "0"
      },
      {
        "displayname": "Retrieving metadata from Salesforce",
        "name": "Microsoft-SalesforceGetObjectMetadata"
      },
      {
        "displayname": "Creating tables in database",
        "name": "Microsoft-SalesforceSqlArtefacts"
      },
      {
        "displayname": "Setting configuration",
        "name": "Microsoft-SetConfigValueInSql",
        "SqlConfigTable": "[smgt].[configuration]",
        "SqlServerIndex": "0"
      },
      {
        "DeploymentName": "ADFDeployment",
        "displayname": "Creating data connections",
        "name": "Microsoft-ADFDeployLinkedServices"
      },
      {
        "DeploymentName": "ADFPreDeploymentDatasets",
        "displayname": "Creating mappings to historical data",
        "name": "Microsoft-ADFDeployDatasets"
      },
      {
        "DeploymentName": "ADFPreDeploymentPipeline",
        "displayname": "Scheduling one time data load for historical data",
        "name": "Microsoft-ADFDeployPipelines"
      },
      {
        "DeploymentName": "ADFPostDeploymentDatasets",
        "displayname": "Creating mappings to future data",
        "name": "Microsoft-ADFDeployDatasets",
        "postDeploymentPipelineType": "PostDeployment"
      },
      {
        "DeploymentName": "ADFPostDeploymentPipeline",
        "displayname": "Scheduling data loads for future data ",
        "name": "Microsoft-ADFDeployPipelines",
        "postDeploymentPipelineType": "PostDeployment"
      },
      {
        "displayname": "Checking data exists in target",
        "FinishedActionName": "Microsoft-ADFSliceStatus",
        "IsWaiting": true,
        "name": "Microsoft-GetDataPullStatus",
        "SqlServerIndex": 0,
        "TargetSchema": "dbo"
      }
    ],
    "Pages": [
      {
        "architectureDiagram": "dist/Apps/Microsoft/Released/Microsoft-SalesforceSalesManagement/Web/Images/salesforceArchitectureDiagram.png",
        "displayname": "Getting Started",
        "list1": [
          "Azure Subscription",
          "Salesforce Subscription",
          "Azure SQL Database",
          "Power BI Desktop (latest version)",
          "Power BI Pro (to share the template with your organization)"
        ],
        "list2": [
          "Full cloud solution with minimum set up and maintenance considerations",
          "Data pulled from Salesforce into an Azure SQL Database using Azure Data Factory",
          "Connect to Azure SQL and import data into Power BI"
        ],
        "name": "$SiteCommon$/pagesgallery/getting-started.html",
        "showBack": "$(false)",
        "subtitle": "Welcome to the Salesforce Sales Management solution template.",
        "templateName": "Salesforce Sales Management"
      },
      {
        "displayname": "Azure",
        "name": "$SiteCommon$/pagesgallery/azure-login.html",
        "pricingCalculatorUrl": "https://azure.microsoft.com/en-us/pricing/calculator/",
        "pricingCost": "$run('By clicking next and deploying the template, you authorize Microsoft to create Azure resources on your subscription and bill based on their respective pricing rates. The approximate base cost of the Azure resources used by this template is $1.50 a day. The cost will vary with the amount of data that will be moved. These costs are estimates only and subject to change.')",
        "pricingUrl": "https://github.com/Microsoft/BusinessPlatformApps/tree/master/Source/Apps/Microsoft/Released/Microsoft-SalesforceSalesManagement#azure-data-factory-pricing"
      },
      {
        "displayname": "Salesforce",
        "name": "$SiteCommon$/pagesgallery/salesforce-login.html",
        "salesforceObjects": "Opportunity,Account,Lead,Product2,OpportunityLineItem,OpportunityStage,User,UserRole"
      },
      {
        "displayname": "SQL Target",
        "isAzureSql": true,
        "name": "$SiteCommon$/pagesgallery/sql-server.html",
        "newSqlDatabase": "SalesforceDB",
        "showAzureSql": false,
        "showNewSqlOption": true,
        "subtitle": "Set up a connection to SQL so we can bring in your Salesforce data.",
        "title": "Connect to your SQL Database"
      },
      {
        "displayname": "Customize",
        "name": "$SiteCommon$/pagesgallery/customize.html",
        "showEmails": true,
        "showRecurrenceOptions": true,
        "sourceApplication": "Salesforce"
      },
      {
        "displayname": "Summary",
        "name": "$SiteCommon$/pagesgallery/summary.html",
        "values": {
          "Actuals": "$(this.MS.DataStore.getValue(\"actuals\"))",
          "Database": "$(this.MS.DataStore.getJson(\"SqlCredentials\").Database)",
          "Emails": "$(this.MS.DataStore.getValue(\"EmailAddresses\"))",
          "FiscalStart": "$(this.MS.DataStore.getValue(\"fiscalMonth\"))",
          "PipelineFrequency": "$(this.MS.DataStore.getValue(\"postDeploymentPipelineFrequency\"))",
          "PipelineInterval": "$(this.MS.DataStore.getValue(\"postDeploymentPipelineInterval\"))",
          "ResourceGroup": "$(this.MS.DataStore.getValue(\"SelectedResourceGroup\"))",
          "SqlServer": "$(this.MS.DataStore.getJson(\"SqlCredentials\").Server)",
          "Subscription": "$(this.MS.DataStore.getJson(\"SelectedSubscription\").SubscriptionId)"
        }
      },
      {
        "displayname": "Progress",
        "filename": "$save('SalesManagementReport.pbix')",
        "finishedActionName": "Microsoft-ADFSliceStatus",
        "name": "$SiteCommon$/pagesgallery/progress.html",
        "showCounts": true,
        "targetSchema": "dbo"
      }
    ]
  },
  "Uninstall": {
    "Pages": [
      {
        "displayname": "Uninstall Start",
        "name": "$SiteCommon$/pagesgallery/getting-started.html"
      },
      {
        "displayname": " Uninstall Login",
        "name": "$SiteCommon$/pagesgallery/azure-login.html"
      }
    ],
    "Actions": []
  }
}